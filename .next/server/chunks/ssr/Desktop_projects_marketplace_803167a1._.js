module.exports=[40396,a=>{"use strict";var b=a.i(88446),c=a.i(5537),d=a.i(81676),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(49031);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],40396)},81364,a=>{"use strict";let b=(0,a.i(55994).default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],81364)},98981,a=>{"use strict";var b=a.i(88446),c=a.i(49031);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tfoot",{"data-slot":"table-footer",className:(0,c.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",a),...d})}function h({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function i({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function j({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function k({className:a,...d}){return(0,b.jsx)("caption",{"data-slot":"table-caption",className:(0,c.cn)("text-muted-foreground mt-4 text-sm",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCaption",()=>k,"TableCell",()=>j,"TableFooter",()=>g,"TableHead",()=>i,"TableHeader",()=>e,"TableRow",()=>h])},69564,a=>{"use strict";var b=a.i(88446),c=a.i(49612),d=a.i(39741),e=a.i(49031);function f({...a}){return(0,b.jsx)(c.Root,{"data-slot":"dialog",...a})}function g({...a}){return(0,b.jsx)(c.Trigger,{"data-slot":"dialog-trigger",...a})}function h({...a}){return(0,b.jsx)(c.Portal,{"data-slot":"dialog-portal",...a})}function i({className:a,...d}){return(0,b.jsx)(c.Overlay,{"data-slot":"dialog-overlay",className:(0,e.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...d})}function j({className:a,children:f,showCloseButton:g=!0,...j}){return(0,b.jsxs)(h,{"data-slot":"dialog-portal",children:[(0,b.jsx)(i,{}),(0,b.jsxs)(c.Content,{"data-slot":"dialog-content",className:(0,e.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...j,children:[f,g&&(0,b.jsxs)(c.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(d.XIcon,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function k({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,e.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function l({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-footer",className:(0,e.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function m({className:a,...d}){return(0,b.jsx)(c.Title,{"data-slot":"dialog-title",className:(0,e.cn)("text-lg leading-none font-semibold",a),...d})}function n({className:a,...d}){return(0,b.jsx)(c.Description,{"data-slot":"dialog-description",className:(0,e.cn)("text-muted-foreground text-sm",a),...d})}a.s(["Dialog",()=>f,"DialogContent",()=>j,"DialogDescription",()=>n,"DialogFooter",()=>l,"DialogHeader",()=>k,"DialogTitle",()=>m,"DialogTrigger",()=>g])},73104,a=>{"use strict";var b=a.i(88446),c=a.i(5537),d=a.i(98981),e=a.i(67411),f=a.i(55994);let g=(0,f.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),h=(0,f.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var i=a.i(69564),j=a.i(54917),k=a.i(40396),l=a.i(81364);let m=(0,f.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),n=(0,f.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),o=(0,f.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),p=(0,f.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),q=(0,f.default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var r=a.i(10675),s=a.i(5881);function t({order:a,listingId:d,open:f,onOpenChange:t}){let[u,v]=(0,c.useState)(a.status),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),A=(0,r.useRouter)(),B=async b=>{if(b!==a.status){x(!0),z("");try{let c=await fetch(`http://localhost:4000/listings/${d}/orders/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:b})}),e=await c.json();if(!c.ok)throw Error(e.message||"Failed to update order status");A.refresh()}catch(b){z(b.message||"Failed to update order status"),v(a.status)}finally{x(!1)}}},C="DELIVERED"!==a.status&&"CANCELLED"!==a.status;return(0,b.jsx)(i.Dialog,{open:f,onOpenChange:t,children:(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto border-0",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{className:"text-2xl font-light",children:"Order Details"}),(0,b.jsxs)(i.DialogDescription,{children:["Order #",a.id.slice(0,8)]})]}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(l.Package,{className:"h-4 w-4"}),"Listing Information"]}),(0,b.jsxs)("div",{className:"flex gap-4 p-4 rounded-xl bg-white/5 border border-white/10",children:[a.listing.images&&a.listing.images.length>0&&(0,b.jsx)("div",{className:"relative w-20 h-20 rounded-lg overflow-hidden shrink-0",children:(0,b.jsx)(s.default,{src:a.listing.images[0],alt:a.listing.name,fill:!0,className:"object-cover"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.listing.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["₹",parseFloat(a.listing.price).toFixed(2)," per unit"]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Quantity: ",a.quantity]}),(0,b.jsxs)("p",{className:"text-sm font-medium text-foreground mt-1",children:["Total: ₹",parseFloat(a.totalPrice).toFixed(2)]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(g,{className:"h-4 w-4"}),"Customer Information"]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 rounded-xl bg-white/5 border border-white/10",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.user.name})}),a.user.email&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(o,{className:"h-3 w-3"}),(0,b.jsx)("a",{href:`mailto:${a.user.email}`,className:"hover:text-foreground",children:a.user.email})]}),a.user.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(p,{className:"h-3 w-3"}),(0,b.jsx)("a",{href:`tel:${a.user.phone}`,className:"hover:text-foreground",children:a.user.phone})]}),a.user.address&&(0,b.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(n,{className:"h-3 w-3 mt-0.5"}),(0,b.jsx)("p",{children:a.user.address})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(q,{className:"h-4 w-4"}),"Order Status"]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsx)(k.Label,{htmlFor:"status",className:"text-sm font-medium",children:"Current Status"}),C?(0,b.jsxs)(j.Select,{value:u,onValueChange:a=>{v(a),B(a)},disabled:w,children:[(0,b.jsx)(j.SelectTrigger,{id:"status",className:"rounded-xl w-[180px]",children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"PENDING",children:"Pending"}),(0,b.jsx)(j.SelectItem,{value:"CONFIRMED",children:"Confirmed"}),(0,b.jsx)(j.SelectItem,{value:"DELIVERED",children:"Delivered"}),(0,b.jsx)(j.SelectItem,{value:"CANCELLED",children:"Cancelled"})]})]}):(0,b.jsx)(e.Badge,{className:`rounded-full ${(a=>{switch(a){case"DELIVERED":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"CONFIRMED":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"PENDING":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"CANCELLED":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}})(a.status)}`,children:a.status})]}),w&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Updating status..."}),!C&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Final status - cannot be changed"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(h,{className:"h-4 w-4"}),"Additional Information"]}),(0,b.jsxs)("div",{className:"space-y-2 p-4 rounded-xl bg-white/5 border border-white/10 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Order Date:"}),(0,b.jsx)("span",{className:"text-foreground",children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Last Updated:"}),(0,b.jsx)("span",{className:"text-foreground",children:new Date(a.updatedAt).toLocaleString()})]}),a.transactionId&&(0,b.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(m,{className:"h-3 w-3"}),"Transaction ID:"]}),(0,b.jsx)("span",{className:"text-foreground font-mono text-xs",children:a.transactionId})]}),a.notes&&(0,b.jsxs)("div",{className:"pt-2 border-t border-white/10",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Notes:"}),(0,b.jsx)("p",{className:"text-foreground mt-1",children:a.notes})]})]})]}),y&&(0,b.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-3",children:(0,b.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:y})})]})]})})}function u({orders:a,listingId:f}){let[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"glass-card rounded-xl shadow-soft border-0 overflow-hidden",children:(0,b.jsxs)(d.Table,{children:[(0,b.jsx)(d.TableHeader,{children:(0,b.jsxs)(d.TableRow,{className:"border-b border-white/10 hover:bg-transparent",children:[(0,b.jsx)(d.TableHead,{className:"text-foreground font-semibold",children:"Order ID"}),(0,b.jsx)(d.TableHead,{className:"text-foreground font-semibold",children:"Customer"}),(0,b.jsx)(d.TableHead,{className:"text-foreground font-semibold",children:"Quantity"}),(0,b.jsx)(d.TableHead,{className:"text-foreground font-semibold",children:"Total Price"}),(0,b.jsx)(d.TableHead,{className:"text-foreground font-semibold",children:"Status"}),(0,b.jsx)(d.TableHead,{className:"text-foreground font-semibold",children:"Date"})]})}),(0,b.jsx)(d.TableBody,{children:a.map(a=>{var c;return(0,b.jsxs)(d.TableRow,{onClick:()=>{j(a),l(!0)},className:"border-b border-white/10 hover:bg-white/5 transition-colors cursor-pointer",children:[(0,b.jsxs)(d.TableCell,{className:"font-medium text-foreground",children:["#",a.id.slice(0,8)]}),(0,b.jsx)(d.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:a.user.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.user.email})]})]})}),(0,b.jsx)(d.TableCell,{className:"text-foreground",children:a.quantity}),(0,b.jsxs)(d.TableCell,{className:"text-foreground font-medium",children:["₹",parseFloat(a.totalPrice).toFixed(2)]}),(0,b.jsx)(d.TableCell,{children:(c=a.status,(0,b.jsx)(e.Badge,{className:`${{PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",CONFIRMED:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",DELIVERED:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",CANCELLED:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}[c]} rounded-full`,children:c}))}),(0,b.jsx)(d.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(h,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm",children:new Date(a.createdAt).toLocaleDateString()})]})})]},a.id)})})]})}),i&&(0,b.jsx)(t,{order:i,listingId:f,open:k,onOpenChange:l})]})}a.s(["OrdersTable",()=>u],73104)}];

//# sourceMappingURL=Desktop_projects_marketplace_803167a1._.js.map