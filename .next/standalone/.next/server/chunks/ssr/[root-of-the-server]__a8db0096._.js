module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},29246,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(68114);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],70430)},66718,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},15055,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70121),e=a.i(7554),f=a.i(25152),g=a.i(77994),h=a.i(3688),i=a.i(77192);a.i(35112);var j=Symbol("radix.slottable");function k(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===j}var l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{var f,g;let h,i,j,l=(g=f=`Primitive.${e}`,(h=c.forwardRef((a,b)=>{let{children:e,...f}=a;if(c.isValidElement(e)){var g;let a,h,i=(g=e,(h=(a=Object.getOwnPropertyDescriptor(g.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.ref:(h=(a=Object.getOwnPropertyDescriptor(g,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?g.props.ref:g.props.ref||g.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(f,e.props);return e.type!==c.Fragment&&(j.ref=b?(0,d.composeRefs)(b,i):i),c.cloneElement(e,j)}return c.Children.count(e)>1?c.Children.only(null):null})).displayName=`${g}.SlotClone`,i=h,(j=c.forwardRef((a,d)=>{let{children:e,...f}=a,g=c.Children.toArray(e),h=g.find(k);if(h){let a=h.props.children,e=g.map(b=>b!==h?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(i,{...f,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(i,{...f,ref:d,children:e})})).displayName=`${f}.Slot`,j),m=c.forwardRef((a,c)=>{let{asChild:d,...f}=a;return(0,b.jsx)(d?l:e,{...f,ref:c})});return m.displayName=`Primitive.${e}`,{...a,[e]:m}},{}),m="Checkbox",[n,o]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(m),[p,q]=n(m);function r(a){let{__scopeCheckbox:d,checked:e,children:g,defaultChecked:h,disabled:i,form:j,name:k,onCheckedChange:l,required:n,value:o="on",internal_do_not_use_render:q}=a,[r,s]=(0,f.useControllableState)({prop:e,defaultProp:h??!1,onChange:l,caller:m}),[t,u]=c.useState(null),[v,w]=c.useState(null),x=c.useRef(!1),y=!t||!!j||!!t.closest("form"),A={checked:r,disabled:i,setChecked:s,control:t,setControl:u,name:k,form:j,value:o,hasConsumerStoppedPropagationRef:x,required:n,defaultChecked:!z(h)&&h,isFormControl:y,bubbleInput:v,setBubbleInput:w};return(0,b.jsx)(p,{scope:d,...A,children:"function"==typeof q?q(A):g})}var s="CheckboxTrigger",t=c.forwardRef(({__scopeCheckbox:a,onKeyDown:f,onClick:g,...h},i)=>{let{control:j,value:k,disabled:m,checked:n,required:o,setControl:p,setChecked:r,hasConsumerStoppedPropagationRef:t,isFormControl:u,bubbleInput:v}=q(s,a),w=(0,d.useComposedRefs)(i,p),x=c.useRef(n);return c.useEffect(()=>{let a=j?.form;if(a){let b=()=>r(x.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[j,r]),(0,b.jsx)(l.button,{type:"button",role:"checkbox","aria-checked":z(n)?"mixed":n,"aria-required":o,"data-state":A(n),"data-disabled":m?"":void 0,disabled:m,value:k,...h,ref:w,onKeyDown:(0,e.composeEventHandlers)(f,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,e.composeEventHandlers)(g,a=>{r(a=>!!z(a)||!a),v&&u&&(t.current=a.isPropagationStopped(),t.current||a.stopPropagation())})})});t.displayName=s;var u=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(r,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(y,{__scopeCheckbox:d})]})})});u.displayName=m;var v="CheckboxIndicator",w=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=q(v,d);return(0,b.jsx)(i.Presence,{present:e||z(g.checked)||!0===g.checked,children:(0,b.jsx)(l.span,{"data-state":A(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});w.displayName=v;var x="CheckboxBubbleInput",y=c.forwardRef(({__scopeCheckbox:a,...e},f)=>{let{control:i,hasConsumerStoppedPropagationRef:j,checked:k,defaultChecked:m,required:n,disabled:o,name:p,value:r,form:s,bubbleInput:t,setBubbleInput:u}=q(x,a),v=(0,d.useComposedRefs)(f,u),w=(0,g.usePrevious)(k),y=(0,h.useSize)(i);c.useEffect(()=>{if(!t)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!j.current;if(w!==k&&a){let c=new Event("click",{bubbles:b});t.indeterminate=z(k),a.call(t,!z(k)&&k),t.dispatchEvent(c)}},[t,w,k,j]);let A=c.useRef(!z(k)&&k);return(0,b.jsx)(l.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??A.current,required:n,disabled:o,name:p,value:r,form:s,...e,tabIndex:-1,ref:v,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function z(a){return"indeterminate"===a}function A(a){return z(a)?"indeterminate":a?"checked":"unchecked"}y.displayName=x;var B=a.i(34157),B=B,C=a.i(68114);let D=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(u,{ref:d,className:(0,C.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...c,children:(0,b.jsx)(w,{className:(0,C.cn)("flex items-center justify-center text-current"),children:(0,b.jsx)(B.default,{className:"h-4 w-4"})})}));D.displayName=u.displayName,a.s(["Checkbox",()=>D],15055)},31048,a=>{"use strict";var b=a.i(87924),c=a.i(99570),d=a.i(66718),e=a.i(70430),f=a.i(29246),g=a.i(80701),h=a.i(15055),i=a.i(38246),j=a.i(210),k=a.i(50944),l=a.i(72131);let m="http://localhost:4000";function n(){let a=(0,k.useParams)(),n=(0,k.useRouter)(),o=a.id,[p,q]=(0,l.useState)(null),[r,s]=(0,l.useState)(!0),[t,u]=(0,l.useState)(!1),[v,w]=(0,l.useState)(null);async function x(a){a.preventDefault(),u(!0),w(null);let b=new FormData(a.currentTarget),c=b.get("variants").split(",").map(a=>a.trim()).filter(a=>a.length>0),d=b.get("tags").split(",").map(a=>a.trim()).filter(a=>a.length>0),e=b.get("images").split(",").map(a=>a.trim()).filter(a=>a.length>0),f={name:b.get("name"),description:b.get("description"),type:b.get("type"),inventoryType:b.get("inventoryType"),price:b.get("price")?parseFloat(b.get("price")):null,availableQty:b.get("availableQty")?parseInt(b.get("availableQty")):null,isAvailable:"on"===b.get("isAvailable"),managed:"on"===b.get("managed"),images:e.length>0?e:p.images,variants:c.length>0?c:[],tags:d.length>0?d:[]};try{let a=await fetch(`${m}/vendors/${p.vendorId}/listings/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(f)}),b=await a.json();if(!a.ok||!b.success)throw Error(b.message||"Failed to update listing");n.push(`/marketplace/${o}`)}catch(a){console.error("Error updating listing:",a),"Failed to fetch"===a.message||"TypeError"===a.name?w(`Cannot connect to backend server at ${m}. Please ensure the backend is running.`):w(a.message||"Failed to update listing")}finally{u(!1)}}return((0,l.useEffect)(()=>{!async function(){try{let a=await fetch(`${m}/listings/${o}`,{credentials:"include"});if(!a.ok)return void n.push("/marketplace");let b=await a.json();b.success&&b.data?q(b.data):n.push("/marketplace")}catch(a){console.error("Error fetching listing:",a),w("Failed to load listing")}finally{s(!1)}}()},[o,n]),r)?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-soft flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):p?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-soft",children:(0,b.jsxs)("main",{className:"container mx-auto px-6 py-12 max-w-4xl",children:[(0,b.jsx)(c.Button,{asChild:!0,variant:"ghost",className:"mb-8 rounded-2xl",children:(0,b.jsxs)(i.default,{href:`/marketplace/${o}`,children:[(0,b.jsx)(j.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Listing"]})}),(0,b.jsxs)("div",{className:"glass-card rounded-3xl p-10 shadow-soft border-0",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-light mb-2 text-foreground",children:"Edit Listing"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Update listing details for ",p.vendor?.name]})]}),v&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl",children:(0,b.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:v})}),(0,b.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"name",children:"Listing Name *"}),(0,b.jsx)(d.Input,{id:"name",name:"name",defaultValue:p.name,placeholder:"e.g., Vintage T-Shirt",required:!0,maxLength:100,className:"rounded-xl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"description",children:"Description *"}),(0,b.jsx)(f.Textarea,{id:"description",name:"description",defaultValue:p.description,placeholder:"Describe your listing...",rows:4,required:!0,maxLength:1e3,className:"rounded-xl resize-none"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"type",children:"Type *"}),(0,b.jsxs)(g.Select,{name:"type",defaultValue:p.type,children:[(0,b.jsx)(g.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(g.SelectValue,{placeholder:"Select type"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"PRODUCT",children:"Product"}),(0,b.jsx)(g.SelectItem,{value:"SERVICE",children:"Service"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"inventoryType",children:"Inventory Type *"}),(0,b.jsxs)(g.Select,{name:"inventoryType",defaultValue:p.inventoryType,children:[(0,b.jsx)(g.SelectTrigger,{className:"rounded-xl",children:(0,b.jsx)(g.SelectValue,{placeholder:"Select inventory type"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"STOCK",children:"In Stock"}),(0,b.jsx)(g.SelectItem,{value:"ON_DEMAND",children:"On Demand"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"price",children:"Price (â‚¹)"}),(0,b.jsx)(d.Input,{id:"price",name:"price",type:"number",step:"0.01",min:"0",defaultValue:p.price?.toString()||"",placeholder:"0.00",className:"rounded-xl"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty if price varies"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"availableQty",children:"Available Quantity"}),(0,b.jsx)(d.Input,{id:"availableQty",name:"availableQty",type:"number",min:"0",defaultValue:p.availableQty?.toString()||"",placeholder:"0",className:"rounded-xl"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"For stock-based items"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(h.Checkbox,{id:"isAvailable",name:"isAvailable",defaultChecked:!1!==p.isAvailable}),(0,b.jsx)(e.Label,{htmlFor:"isAvailable",className:"cursor-pointer",children:"Available for purchase"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(h.Checkbox,{id:"managed",name:"managed",defaultChecked:!0===p.managed}),(0,b.jsx)(e.Label,{htmlFor:"managed",className:"cursor-pointer",children:"Enable order management"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground ml-6",children:"Allow users to place orders directly through the marketplace. Requires vendor UPI ID for payments. If disabled, users will only see contact information."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"images",children:"Images (comma-separated URLs)"}),(0,b.jsx)(f.Textarea,{id:"images",name:"images",defaultValue:p.images?.join(", ")||"",placeholder:"https://example.com/image1.jpg, https://example.com/image2.jpg",rows:2,className:"rounded-xl resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"variants",children:"Variants"}),(0,b.jsx)(d.Input,{id:"variants",name:"variants",defaultValue:p.variants?.join(", ")||"",placeholder:"e.g., S, M, L, XL",className:"rounded-xl"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated values"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"tags",children:"Tags"}),(0,b.jsx)(d.Input,{id:"tags",name:"tags",defaultValue:p.tags?.map(a=>a.name).join(", ")||"",placeholder:"e.g., electronics, new, trending",className:"rounded-xl"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated tags"})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)(c.Button,{type:"button",variant:"ghost",asChild:!0,className:"flex-1 rounded-2xl glass-light",children:(0,b.jsx)(i.default,{href:`/marketplace/${o}`,children:"Cancel"})}),(0,b.jsx)(c.Button,{type:"submit",disabled:t,className:"flex-1 rounded-2xl bg-black hover:bg-gray-900 text-white",children:t?"Saving...":"Save Changes"})]})]})]})]})}):null}a.s(["default",()=>n])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a8db0096._.js.map