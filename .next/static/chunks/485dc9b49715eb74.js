(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24687,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},10204,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(48425),s=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var i=e.i(75157);function n({className:e,...r}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],10204)},18566,(e,t,r)=>{t.exports=e.r(76562)},93479,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,type:a,...s}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>a])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},57428,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(20783),s=e.i(81140),i=e.i(69340),n=e.i(99682),l=e.i(35804),d=e.i(96626);e.i(74080);var o=Symbol("radix.slottable");function c(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{var i,n;let l,d,o,u=(n=i=`Primitive.${s}`,(l=r.forwardRef((e,t)=>{let{children:s,...i}=e;if(r.isValidElement(s)){var n;let e,l,d=(n=s,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let r={...t};for(let a in t){let s=e[a],i=t[a];/^on[A-Z]/.test(a)?s&&i?r[a]=(...e)=>{let t=i(...e);return s(...e),t}:s&&(r[a]=s):"style"===a?r[a]={...s,...i}:"className"===a&&(r[a]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}(i,s.props);return s.type!==r.Fragment&&(o.ref=t?(0,a.composeRefs)(t,d):d),r.cloneElement(s,o)}return r.Children.count(s)>1?r.Children.only(null):null})).displayName=`${n}.SlotClone`,d=l,(o=r.forwardRef((e,a)=>{let{children:s,...i}=e,n=r.Children.toArray(s),l=n.find(c);if(l){let e=l.props.children,s=n.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(d,{...i,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,t.jsx)(d,{...i,ref:a,children:s})})).displayName=`${i}.Slot`,o),m=r.forwardRef((e,r)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?u:s,{...i,ref:r})});return m.displayName=`Primitive.${s}`,{...e,[s]:m}},{}),m="Checkbox",[p,x]=function(e,a=[]){let s=[],i=()=>{let t=s.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return i.scopeName=e,[function(a,i){let n=r.createContext(i),l=s.length;s=[...s,i];let d=a=>{let{scope:s,children:i,...d}=a,o=s?.[e]?.[l]||n,c=r.useMemo(()=>d,Object.values(d));return(0,t.jsx)(o.Provider,{value:c,children:i})};return d.displayName=a+"Provider",[d,function(t,s){let d=s?.[e]?.[l]||n,o=r.useContext(d);if(o)return o;if(void 0!==i)return i;throw Error(`\`${t}\` must be used within \`${a}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:r,scopeName:a})=>{let s=r(e)[`__scope${a}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(i,...a)]}(m),[f,h]=p(m);function g(e){let{__scopeCheckbox:a,checked:s,children:n,defaultChecked:l,disabled:d,form:o,name:c,onCheckedChange:u,required:p,value:x="on",internal_do_not_use_render:h}=e,[g,b]=(0,i.useControllableState)({prop:s,defaultProp:l??!1,onChange:u,caller:m}),[v,y]=r.useState(null),[j,N]=r.useState(null),w=r.useRef(!1),k=!v||!!o||!!v.closest("form"),C={checked:g,disabled:d,setChecked:b,control:v,setControl:y,name:c,form:o,value:x,hasConsumerStoppedPropagationRef:w,required:p,defaultChecked:!S(l)&&l,isFormControl:k,bubbleInput:j,setBubbleInput:N};return(0,t.jsx)(f,{scope:a,...C,children:"function"==typeof h?h(C):n})}var b="CheckboxTrigger",v=r.forwardRef(({__scopeCheckbox:e,onKeyDown:i,onClick:n,...l},d)=>{let{control:o,value:c,disabled:m,checked:p,required:x,setControl:f,setChecked:g,hasConsumerStoppedPropagationRef:v,isFormControl:y,bubbleInput:j}=h(b,e),N=(0,a.useComposedRefs)(d,f),w=r.useRef(p);return r.useEffect(()=>{let e=o?.form;if(e){let t=()=>g(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,g]),(0,t.jsx)(u.button,{type:"button",role:"checkbox","aria-checked":S(p)?"mixed":p,"aria-required":x,"data-state":C(p),"data-disabled":m?"":void 0,disabled:m,value:c,...l,ref:N,onKeyDown:(0,s.composeEventHandlers)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s.composeEventHandlers)(n,e=>{g(e=>!!S(e)||!e),j&&y&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})})});v.displayName=b;var y=r.forwardRef((e,r)=>{let{__scopeCheckbox:a,name:s,checked:i,defaultChecked:n,required:l,disabled:d,value:o,onCheckedChange:c,form:u,...m}=e;return(0,t.jsx)(g,{__scopeCheckbox:a,checked:i,defaultChecked:n,disabled:d,required:l,onCheckedChange:c,name:s,form:u,value:o,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{...m,ref:r,__scopeCheckbox:a}),e&&(0,t.jsx)(k,{__scopeCheckbox:a})]})})});y.displayName=m;var j="CheckboxIndicator",N=r.forwardRef((e,r)=>{let{__scopeCheckbox:a,forceMount:s,...i}=e,n=h(j,a);return(0,t.jsx)(d.Presence,{present:s||S(n.checked)||!0===n.checked,children:(0,t.jsx)(u.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...e.style}})})});N.displayName=j;var w="CheckboxBubbleInput",k=r.forwardRef(({__scopeCheckbox:e,...s},i)=>{let{control:d,hasConsumerStoppedPropagationRef:o,checked:c,defaultChecked:m,required:p,disabled:x,name:f,value:g,form:b,bubbleInput:v,setBubbleInput:y}=h(w,e),j=(0,a.useComposedRefs)(i,y),N=(0,n.usePrevious)(c),k=(0,l.useSize)(d);r.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(N!==c&&e){let r=new Event("click",{bubbles:t});v.indeterminate=S(c),e.call(v,!S(c)&&c),v.dispatchEvent(r)}},[v,N,c,o]);let C=r.useRef(!S(c)&&c);return(0,t.jsx)(u.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??C.current,required:p,disabled:x,name:f,value:g,form:b,...s,tabIndex:-1,ref:j,style:{...s.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function S(e){return"indeterminate"===e}function C(e){return S(e)?"indeterminate":e?"checked":"unchecked"}k.displayName=w;var E=e.i(78745),E=E,L=e.i(75157);let R=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(y,{ref:a,className:(0,L.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:(0,t.jsx)(N,{className:(0,L.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(E.default,{className:"h-4 w-4"})})}));R.displayName=y.displayName,e.s(["Checkbox",()=>R],57428)},4631,e=>{"use strict";var t=e.i(43476),r=e.i(19455),a=e.i(93479),s=e.i(10204),i=e.i(24687),n=e.i(67489),l=e.i(57428),d=e.i(22016),o=e.i(71689),c=e.i(18566),u=e.i(71645);let m="http://localhost:4000";function p(){let e=(0,c.useParams)(),p=(0,c.useRouter)(),x=e.id,[f,h]=(0,u.useState)(null),[g,b]=(0,u.useState)(!0),[v,y]=(0,u.useState)(!1),[j,N]=(0,u.useState)(null);async function w(e){e.preventDefault(),y(!0),N(null);let t=new FormData(e.currentTarget),r=t.get("variants").split(",").map(e=>e.trim()).filter(e=>e.length>0),a=t.get("tags").split(",").map(e=>e.trim()).filter(e=>e.length>0),s=t.get("images").split(",").map(e=>e.trim()).filter(e=>e.length>0),i={name:t.get("name"),description:t.get("description"),type:t.get("type"),inventoryType:t.get("inventoryType"),price:t.get("price")?parseFloat(t.get("price")):null,availableQty:t.get("availableQty")?parseInt(t.get("availableQty")):null,isAvailable:"on"===t.get("isAvailable"),managed:"on"===t.get("managed"),images:s.length>0?s:f.images,variants:r.length>0?r:[],tags:a.length>0?a:[]};try{let e=await fetch(`${m}/vendors/${f.vendorId}/listings/${x}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)}),t=await e.json();if(!e.ok||!t.success)throw Error(t.message||"Failed to update listing");p.push(`/marketplace/${x}`)}catch(e){console.error("Error updating listing:",e),"Failed to fetch"===e.message||"TypeError"===e.name?N(`Cannot connect to backend server at ${m}. Please ensure the backend is running.`):N(e.message||"Failed to update listing")}finally{y(!1)}}return((0,u.useEffect)(()=>{!async function(){try{let e=await fetch(`${m}/listings/${x}`,{credentials:"include"});if(!e.ok)return void p.push("/marketplace");let t=await e.json();t.success&&t.data?h(t.data):p.push("/marketplace")}catch(e){console.error("Error fetching listing:",e),N("Failed to load listing")}finally{b(!1)}}()},[x,p]),g)?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-soft flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):f?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-soft",children:(0,t.jsxs)("main",{className:"container mx-auto px-6 py-12 max-w-4xl",children:[(0,t.jsx)(r.Button,{asChild:!0,variant:"ghost",className:"mb-8 rounded-2xl",children:(0,t.jsxs)(d.default,{href:`/marketplace/${x}`,children:[(0,t.jsx)(o.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Listing"]})}),(0,t.jsxs)("div",{className:"glass-card rounded-3xl p-10 shadow-soft border-0",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-light mb-2 text-foreground",children:"Edit Listing"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Update listing details for ",f.vendor?.name]})]}),j&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl",children:(0,t.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200",children:j})}),(0,t.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"name",children:"Listing Name *"}),(0,t.jsx)(a.Input,{id:"name",name:"name",defaultValue:f.name,placeholder:"e.g., Vintage T-Shirt",required:!0,maxLength:100,className:"rounded-xl"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"description",children:"Description *"}),(0,t.jsx)(i.Textarea,{id:"description",name:"description",defaultValue:f.description,placeholder:"Describe your listing...",rows:4,required:!0,maxLength:1e3,className:"rounded-xl resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"type",children:"Type *"}),(0,t.jsxs)(n.Select,{name:"type",defaultValue:f.type,children:[(0,t.jsx)(n.SelectTrigger,{className:"rounded-xl",children:(0,t.jsx)(n.SelectValue,{placeholder:"Select type"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"PRODUCT",children:"Product"}),(0,t.jsx)(n.SelectItem,{value:"SERVICE",children:"Service"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"inventoryType",children:"Inventory Type *"}),(0,t.jsxs)(n.Select,{name:"inventoryType",defaultValue:f.inventoryType,children:[(0,t.jsx)(n.SelectTrigger,{className:"rounded-xl",children:(0,t.jsx)(n.SelectValue,{placeholder:"Select inventory type"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"STOCK",children:"In Stock"}),(0,t.jsx)(n.SelectItem,{value:"ON_DEMAND",children:"On Demand"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"price",children:"Price (â‚¹)"}),(0,t.jsx)(a.Input,{id:"price",name:"price",type:"number",step:"0.01",min:"0",defaultValue:f.price?.toString()||"",placeholder:"0.00",className:"rounded-xl"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty if price varies"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"availableQty",children:"Available Quantity"}),(0,t.jsx)(a.Input,{id:"availableQty",name:"availableQty",type:"number",min:"0",defaultValue:f.availableQty?.toString()||"",placeholder:"0",className:"rounded-xl"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"For stock-based items"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(l.Checkbox,{id:"isAvailable",name:"isAvailable",defaultChecked:!1!==f.isAvailable}),(0,t.jsx)(s.Label,{htmlFor:"isAvailable",className:"cursor-pointer",children:"Available for purchase"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(l.Checkbox,{id:"managed",name:"managed",defaultChecked:!0===f.managed}),(0,t.jsx)(s.Label,{htmlFor:"managed",className:"cursor-pointer",children:"Enable order management"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground ml-6",children:"Allow users to place orders directly through the marketplace. Requires vendor UPI ID for payments. If disabled, users will only see contact information."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"images",children:"Images (comma-separated URLs)"}),(0,t.jsx)(i.Textarea,{id:"images",name:"images",defaultValue:f.images?.join(", ")||"",placeholder:"https://example.com/image1.jpg, https://example.com/image2.jpg",rows:2,className:"rounded-xl resize-none"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"variants",children:"Variants"}),(0,t.jsx)(a.Input,{id:"variants",name:"variants",defaultValue:f.variants?.join(", ")||"",placeholder:"e.g., S, M, L, XL",className:"rounded-xl"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated values"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"tags",children:"Tags"}),(0,t.jsx)(a.Input,{id:"tags",name:"tags",defaultValue:f.tags?.map(e=>e.name).join(", ")||"",placeholder:"e.g., electronics, new, trending",className:"rounded-xl"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated tags"})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,t.jsx)(r.Button,{type:"button",variant:"ghost",asChild:!0,className:"flex-1 rounded-2xl glass-light",children:(0,t.jsx)(d.default,{href:`/marketplace/${x}`,children:"Cancel"})}),(0,t.jsx)(r.Button,{type:"submit",disabled:v,className:"flex-1 rounded-2xl bg-black hover:bg-gray-900 text-white",children:v?"Saving...":"Save Changes"})]})]})]})]})}):null}e.s(["default",()=>p])}]);